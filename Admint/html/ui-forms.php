<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Modernize Free</title>
  <link rel="shortcut icon" type="image/png" href="../assets/images/logos/favicon.png" />
  <link rel="stylesheet" href="../assets/css/styles.min.css" />
  <link rel="stylesheet" href="../assets/css/index.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>
  <!--  Body Wrapper -->
  <div class="page-wrapper" id="main-wrapper" data-layout="vertical" data-navbarbg="skin6" data-sidebartype="full" data-sidebar-position="fixed" data-header-position="fixed">
    <!-- Sidebar Start -->
    <aside class="left-sidebar">
      <!-- Sidebar scroll-->
      <div>
        <div class="brand-logo d-flex align-items-center justify-content-between">
          <a href="./index.html" class="text-nowrap logo-img">
            <img src="../assets/images/logos/dark-logo.svg" width="180" alt="" />
          </a>
          <div class="close-btn d-xl-none d-block sidebartoggler cursor-pointer" id="sidebarCollapse">
            <i class="ti ti-x fs-8"></i>
          </div>
        </div>
        <!-- Sidebar navigation-->
        <nav class="sidebar-nav scroll-sidebar" data-simplebar="">
          <ul id="sidebarnav">
            <li class="nav-small-cap">
              <i class="ti ti-dots nav-small-cap-icon fs-4"></i>
              <span class="hide-menu">Home</span>
            </li>
            <li class="sidebar-item">
              <a class="sidebar-link" href="./index.html" aria-expanded="false">
                <span>
                  <i class="ti ti-layout-dashboard"></i>
                </span>
                <span class="hide-menu">Dashboard</span>
              </a>
            </li>
            <li class="nav-small-cap">
              <i class="ti ti-dots nav-small-cap-icon fs-4"></i>
              <span class="hide-menu">UI COMPONENTS</span>
            </li>
            <li class="sidebar-item">
              <a class="sidebar-link" href="./ui-buttons.html" aria-expanded="false">
                <span>
                  <i class="ti ti-article"></i>
                </span>
                <span class="hide-menu">Buttons</span>
              </a>
            </li>
            <li class="sidebar-item">
              <a class="sidebar-link" href="./ui-alerts.html" aria-expanded="false">
                <span>
                  <i class="ti ti-alert-circle"></i>
                </span>
                <span class="hide-menu">Alerts</span>
              </a>
            </li>
            <li class="sidebar-item">
              <a class="sidebar-link" href="./ui-card.html" aria-expanded="false">
                <span>
                  <i class="ti ti-cards"></i>
                </span>
                <span class="hide-menu">Card</span>
              </a>
            </li>
            <li class="sidebar-item">
              <a class="sidebar-link" href="./ui-forms.php" aria-expanded="false">
                <span>
                  <i class="ti ti-file-description"></i>
                </span>
                <span class="hide-menu">Menu & Logo</span>
              </a>
            </li>
            <li class="sidebar-item">
              <a class="sidebar-link" href="./ui-typography.html" aria-expanded="false">
                <span>
                  <i class="ti ti-typography"></i>
                </span>
                <span class="hide-menu">Typography</span>
              </a>
            </li>
            <li class="nav-small-cap">
              <i class="ti ti-dots nav-small-cap-icon fs-4"></i>
              <span class="hide-menu">AUTH</span>
            </li>
            <li class="sidebar-item">
              <a class="sidebar-link" href="./authentication-login.html" aria-expanded="false">
                <span>
                  <i class="ti ti-login"></i>
                </span>
                <span class="hide-menu">Login</span>
              </a>
            </li>
            <li class="sidebar-item">
              <a class="sidebar-link" href="./authentication-register.html" aria-expanded="false">
                <span>
                  <i class="ti ti-user-plus"></i>
                </span>
                <span class="hide-menu">Register</span>
              </a>
            </li>
            <li class="nav-small-cap">
              <i class="ti ti-dots nav-small-cap-icon fs-4"></i>
              <span class="hide-menu">EXTRA</span>
            </li>
            <li class="sidebar-item">
              <a class="sidebar-link" href="./icon-tabler.html" aria-expanded="false">
                <span>
                  <i class="ti ti-mood-happy"></i>
                </span>
                <span class="hide-menu">Icons</span>
              </a>
            </li>
            <li class="sidebar-item">
              <a class="sidebar-link" href="./sample-page.html" aria-expanded="false">
                <span>
                  <i class="ti ti-aperture"></i>
                </span>
                <span class="hide-menu">Sample Page</span>
              </a>
            </li>
          </ul>
          <div class="unlimited-access hide-menu bg-light-primary position-relative mb-7 mt-5 rounded">
            <div class="d-flex">
              <div class="unlimited-access-title me-3">
                <h6 class="fw-semibold fs-4 mb-6 text-dark w-85">Upgrade to pro</h6>
                <a href="https://adminmart.com/product/modernize-bootstrap-5-admin-template/" target="_blank" class="btn btn-primary fs-2 fw-semibold lh-sm">Buy Pro</a>
              </div>
              <div class="unlimited-access-img">
                <img src="../assets/images/backgrounds/rocket.png" alt="" class="img-fluid">
              </div>
            </div>
          </div>
        </nav>
        <!-- End Sidebar navigation -->
      </div>
      <!-- End Sidebar scroll-->
    </aside>
    <!--  Sidebar End -->
    <!--  Main wrapper -->
    <div class="body-wrapper">
      <!--  Header Start -->
      <header class="app-header">
        <nav class="navbar navbar-expand-lg navbar-light">
          <ul class="navbar-nav">
            <li class="nav-item d-block d-xl-none">
              <a class="nav-link sidebartoggler nav-icon-hover" id="headerCollapse" href="javascript:void(0)">
                <i class="ti ti-menu-2"></i>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link nav-icon-hover" href="javascript:void(0)">
                <i class="ti ti-bell-ringing"></i>
                <div class="notification bg-primary rounded-circle"></div>
              </a>
            </li>
          </ul>
          <div class="navbar-collapse justify-content-end px-0" id="navbarNav">
            <ul class="navbar-nav flex-row ms-auto align-items-center justify-content-end">
              <a href="https://adminmart.com/product/modernize-free-bootstrap-admin-dashboard/" target="_blank" class="btn btn-primary">Download Free</a>
              <li class="nav-item dropdown">
                <a class="nav-link nav-icon-hover" href="javascript:void(0)" id="drop2" data-bs-toggle="dropdown" aria-expanded="false">
                  <img src="../assets/images/profile/user-1.jpg" alt="" width="35" height="35" class="rounded-circle">
                </a>
                <div class="dropdown-menu dropdown-menu-end dropdown-menu-animate-up" aria-labelledby="drop2">
                  <div class="message-body">
                    <a href="javascript:void(0)" class="d-flex align-items-center gap-2 dropdown-item">
                      <i class="ti ti-user fs-6"></i>
                      <p class="mb-0 fs-3">My Profile</p>
                    </a>
                    <a href="javascript:void(0)" class="d-flex align-items-center gap-2 dropdown-item">
                      <i class="ti ti-mail fs-6"></i>
                      <p class="mb-0 fs-3">My Account</p>
                    </a>
                    <a href="javascript:void(0)" class="d-flex align-items-center gap-2 dropdown-item">
                      <i class="ti ti-list-check fs-6"></i>
                      <p class="mb-0 fs-3">My Task</p>
                    </a>
                    <a href="./authentication-login.html" class="btn btn-outline-primary mx-3 mt-2 d-block">Logout</a>
                  </div>
                </div>
              </li>
            </ul>
          </div>
        </nav>
      </header>
      <!--  Header End -->
      <div class="container-fluid">
        <div class="container-fluid">
          <div class="card">
            <div class="card-body">
              <h5 class="card-title fw-semibold mb-4">Forms Input</h5>
              <div style="display: flex;gap: 20px;">
                <div class="card" style="width: 50%;">
                  <div class="card-body">
                    <!-- <form> -->
                    <div class="mb-3">
                      <label for="exampleInputEmail1" class="form-label">Menu & Sub Menu</label>
                      <input type="text" class="form-control" id="exampleInputEmail1" placeholder="Input menu" aria-describedby="emailHelp">
                    </div>
                    <div class="mb-3">
                      <label for="exampleInputEmail1" class="form-label">Show/Hide</label>
                      <select class="form-select" aria-label="Default select example">
                        <option value="2">Show</option>
                        <option value="1">Hide</option>
                      </select>
                    </div>
                    <button style="float: right;" type="submit" class="btn btn-primary">Save</button>
                    <button id="subMenu" type="submit" class="btn btn-danger">Add Submenu</button>
                    <!-- </form> -->
                  </div>
                </div>
                <div class="card" style="width: 50%;">
                  <div class="card-body" id="form_image">
                    <form method="dialog" class="upl">
                      <div id="formImage">
                        <div id="img_box">
                          <input type="file" name="photo_logo" id="img_box1">
                        </div>
                        <input hidden type="text" name="txt_photo" id="txt_photo">
                        <input hidden type="text" id="edit_id" name="edit_id">
                      </div>
                      <label for="exampleInputEmail1" class="form-label">Show/Hide</label>
                      <div id="opt_logo">
                        <select name="logo_opt" id="logo_opt" class="form-select" aria-label="Default select example">
                          <option value="show">Show</option>
                          <option value="hide">Hide</option>
                        </select>
                      </div>

                      <div style="float: right;margin-top: 4rem;">
                        <button name="save_img" id="save_img" class="btn btn-primary">Save</button>
                        <button name="update_img" id="update_img" class="btn btn-danger">Update</button>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
              <!-- view menu  -->
              <div class="card w-100">
                <div class="card-body p-4">
                  <h5 class="card-title fw-semibold mb-4">View All Menu</h5>
                  <div class="table-responsive">
                    <table class="table text-nowrap mb-0 align-middle">
                      <thead class="text-dark fs-4">
                        <tr>
                          <th class="border-bottom-0">
                            <h6 class="fw-semibold mb-0">Id</h6>
                          </th>
                          <th class="border-bottom-0">
                            <h6 class="fw-semibold mb-0">Assigned</h6>
                          </th>
                          <th class="border-bottom-0">
                            <h6 class="fw-semibold mb-0">Name</h6>
                          </th>
                          <th class="border-bottom-0">
                            <h6 class="fw-semibold mb-0">Priority</h6>
                          </th>
                          <th class="border-bottom-0">
                            <h6 class="fw-semibold mb-0">Budget</h6>
                          </th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td class="border-bottom-0">
                            <h6 class="fw-semibold mb-0">1</h6>
                          </td>
                          <td class="border-bottom-0">
                            <h6 class="fw-semibold mb-1">Sunil Joshi</h6>
                            <span class="fw-normal">Web Designer</span>
                          </td>
                          <td class="border-bottom-0">
                            <p class="mb-0 fw-normal">Elite Admin</p>
                          </td>
                          <td class="border-bottom-0">
                            <div class="d-flex align-items-center gap-2">
                              <span class="badge bg-primary rounded-3 fw-semibold">Low</span>
                            </div>
                          </td>
                          <td class="border-bottom-0">
                            <h6 class="fw-semibold mb-0 fs-4">$3.9</h6>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
              <!-- view logo  -->
              <div class="card w-100">
                <div class="card-body p-4">
                  <h5 class="card-title fw-semibold mb-4">View Logo</h5>
                  <div class="table-responsive">
                    <table class="table text-nowrap mb-0 align-middle">
                      <thead class="text-dark fs-4">
                        <tr>
                          <th class="border-bottom-0">
                            <h6 class="fw-semibold mb-0">No</h6>
                          </th>
                          <th class="border-bottom-0">
                            <h6 class="fw-semibold mb-0">Image</h6>
                          </th>
                          <th class="border-bottom-0">
                            <h6 class="fw-semibold mb-0">Option</h6>
                          </th>
                          <th class="border-bottom-0">
                            <h6 class="fw-semibold mb-0">Action</h6>
                          </th>
                        </tr>
                      </thead>
                      <tbody id="form_logo">
                        <?php
                        $cn = mysqli_connect('localhost', 'root', '', 'hotel');
                        $sql = "SELECT * FROM logo ORDER BY id DESC";
                        $rs = $cn->query($sql);
                        $index = 0;
                        while ($row = $rs->fetch_array()) {
                          $index++;
                        ?>
                          <tr>
                            <td class="border-bottom-0">
                              <h6 class="fw-semibold mb-0">
                                <?php echo $index; ?>
                              </h6>
                              <p>
                                <?php echo $row[0]; ?>
                              </p>
                            </td>
                            <td class="border-bottom-0">
                              <div style="width: 85px;height: 85px;">
                                <img style="height: 100%;width: 100%;object-fit: cover;" id="image" src="../assets/img_box/<?php echo $row[1]; ?>" alt="<?php echo $row[1]; ?>">
                              </div>
                            </td>
                            <td class="border-bottom-0">
                              <?php echo $row[2]; ?>
                            </td>
                            <td class="border-bottom-0">
                              <button id="edit" type="button" class="btn btn-primary m-1"><i class="fa-solid fa-file-pen"></i> Edit</button>
                            </td>
                          </tr>
                        <?php
                        }
                        ?>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>

            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- sub menu  -->
    <div class="modal fade" id="sub_menu" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
      <div class="modal-dialog" style="max-width: 70% !important;">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="staticBackdropLabel">Add Sub Menu</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body" style="padding: 15px;">
            <!-- <form> -->
            <div>
              <label for="exampleInputEmail1" class="form-label">Sub Menu</label>
              <input type="text" class="form-control" id="exampleInputEmail1" placeholder="Input sub menu" aria-describedby="emailHelp">
            </div>
            <div>
              <label for="exampleInputEmail1" class="form-label">Select Menu</label>
              <select class="form-select" aria-label="Default select example">
                <option value="2">Home</option>
                <option value="1">Contact</option>
              </select>
            </div>
            <div>
              <label for="exampleInputEmail1" class="form-label">Show/Hide</label>
              <select class="form-select" aria-label="Default select example">
                <option value="2">Show</option>
                <option value="1">Hide</option>
              </select>
            </div>
            <!-- </form> -->
          </div>
          <div class="modal-footer" style="padding: 0 15px;display: flex;justify-content: center;">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Save</button>
          </div>
          <div class="mb-3" style="padding: 15px;">
            <div class="card w-100">
              <div class="card-body p-4">
                <!-- <h5 class="card-title fw-semibold mb-4">View All Sub Menu</h5> -->
                <div class="table-responsive">
                  <table class="table text-nowrap mb-0 align-middle">
                    <thead class="text-dark fs-4">
                      <tr>
                        <th class="border-bottom-0">
                          <h6 class="fw-semibold mb-0">Id</h6>
                        </th>
                        <th class="border-bottom-0">
                          <h6 class="fw-semibold mb-0">Name</h6>
                        </th>
                        <th class="border-bottom-0">
                          <h6 class="fw-semibold mb-0">Option</h6>
                        </th>
                        <th class="border-bottom-0">
                          <h6 class="fw-semibold mb-0">Action</h6>
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td class="border-bottom-0">
                          <h6 class="fw-semibold mb-0">1</h6>
                        </td>
                        <td class="border-bottom-0">
                          <span class="fw-normal">Web Designer</span>
                        </td>
                        <td class="border-bottom-0">
                          <div class="d-flex align-items-center gap-2">
                            <span class="badge bg-primary rounded-3 fw-semibold">Low</span>
                          </div>
                        </td>
                        <td class="border-bottom-0">
                          <div class="d-flex align-items-center gap-2">
                            <span class="badge bg-primary rounded-3 fw-semibold">Low</span>
                          </div>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- message  -->
    <div id="myModal">
      <div class="lskymodal-content">
        <p id="message" style="margin-bottom: 0;">
        </p>
      </div>
    </div>
    <!-- end -->
    <div id="output"></div>

  </div>
  <script src="../assets/libs/jquery/dist/jquery.min.js"></script>
  <script src="../assets/libs/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
  <script src="../assets/js/sidebarmenu.js"></script>
  <script src="../assets/js/app.min.js"></script>
  <script src="../assets/libs/simplebar/dist/simplebar.js"></script>
  <script>
    $(document).ready(function() {
      var mes_box = $('#myModal');
      var mes = $('#message');
      var update_logo = $('#update_img').hide();
      var save_logo = $('#save_img');
      $('#subMenu').click(function() {
        $('#sub_menu').modal('show');
      });
      // upload image
      $('#img_box').change(function() {
        var eThis = $(this);
        var frm = eThis.closest('form.upl');
        var frm_data = new FormData(frm[0]);
        $.ajax({
          url: '../action/upload_image.php',
          type: 'POST',
          data: frm_data,
          contentType: false,
          cache: false,
          processData: false,
          dataType: "json",
          beforeSend: function() {
            //work before success   
          },
          success: function(data) {
            //work after success   
            $('#img_box').css({
              "background-image": "url(../assets/img_box/" + data.name + ")"
            });
            $('#txt_photo').val(data.name);
          }
        });
      });
      // save logo
      $('#save_img').click(function() {
        var eThis = $(this);
        var Parent = eThis.parents('.upl');
        var status1 = Parent.find('#logo_opt');
        var image = Parent.find('#txt_photo');
        // console.log(status1.val());
        var frm = eThis.closest('form.upl');
        var frm_data = new FormData(frm[0]);
        $.ajax({
          url: '../action/save_logo.php',
          type: 'POST',
          data: frm_data,
          contentType: false,
          cache: false,
          processData: false,
          dataType: "json",
          beforeSend: function() {
            //work before success   
          },
          success: function(data) { 
            // get auto data
            var tr =`
              <tr>
                <td class="border-bottom-0">
                  <h6 class="fw-semibold mb-0">
                  <?php echo ($index-$index)+1; ?>
                  </h6>
                  <p>
                  ${data.id}
                  </p>
                </td>
                <td class="border-bottom-0">
                  <div style="width: 85px;height: 85px;">
                    <img style="height: 100%;width: 100%;object-fit: cover;" id="image" src="../assets/img_box/${image.val()}" alt="${image.val()}">
                  </div>
                </td>
                <td class="border-bottom-0">
                  ${status1.val()}
                </td>
                <td class="border-bottom-0">
                  <button id="edit" type="button" class="btn btn-primary m-1"><i class="fa-solid fa-file-pen"></i> Edit</button>
                </td>
              </tr>`;
            //work after success     
            $('#img_box').css({
              "background-image": "url('../assets/images/backgrounds/icon-img_upload.png')"
            });
            $("div#opt_logo > select > option[value='show']").prop("selected", true); // select
           
            mes_box.css({
              "display": "flex"
            });
            setTimeout(() => (mes_box.css({
              "display": "none"
            })), 2000);
            if (data.message == 'success') {
              $('#form_logo').prepend(tr);
              mes.html('Insert Successfully.'); 
            } else {
              mes.html('Please input file!');
            }
          }
        });
      });
      // edit logo
      $('#form_logo').on('click', '#edit', function() {
        // get data from view 
        var tr = $(this).parents('tr');
        var id = tr.find('td:eq(0) p').text();
        var image = tr.find('td:eq(1) img').attr('alt'); // image;
        var status = tr.find('td:eq(2)').text();
        save_logo.hide();
        update_logo.show();
        // asign value 
        $("div#opt_logo > select > option[value=" + status + "]").prop("selected", true); // use with option
        $('#img_box').css({
          "background-image": "url(../assets/img_box/" + image + ")"
        }); // use with background image
        $('#txt_photo').val(image);
        $('#edit_id').val(id);
        mes_box.css({
          "display": "flex"
        });
        setTimeout(() => (mes_box.css({
          "display": "none"
        })), 2000);
        mes.html('Selected');
      });
      // update logo
      update_logo.click(function() {
        var eThis = $(this);
        var Parent = eThis.parents('.upl');
        var photo = Parent.find('#txt_photo');
        var edit_id = Parent.find('#edit_id');
        var status = Parent.find('#logo_opt');
        var frm = eThis.closest('form.upl');
        var frm_data = new FormData(frm[0]);
        $.ajax({
          url: '../action/update_logo.php',
          type: 'POST',
          data: frm_data,
          contentType: false,
          cache: false,
          processData: false,
          dataType: "json",
          beforeSend: function() {
            //work before success   
          },
          success: function(data) {
            var tr =`
              <tr>
                <td class="border-bottom-0">
                  <h6 class="fw-semibold mb-0">
                  <?php echo ($index-$index)+1; ?>
                  </h6>
                  <p>
                  ${edit_id.val()}
                  </p>
                </td>
                <td class="border-bottom-0">
                  <div style="width: 85px;height: 85px;">
                    <img style="height: 100%;width: 100%;object-fit: cover;" id="image" src="../assets/img_box/${photo.val()}" alt="${photo.val()}">
                  </div>
                </td>
                <td class="border-bottom-0">
                  ${status.val()}
                </td>
                <td class="border-bottom-0">
                  <button id="edit" type="button" class="btn btn-primary m-1"><i class="fa-solid fa-file-pen"></i> Edit</button>
                </td>
              </tr>`;
              $('#form_logo').html(tr);
            //work after success     
            $('#img_box').css({
              "background-image": "url('../assets/images/backgrounds/icon-img_upload.png')"
            }); // image
            $("div#opt_logo > select > option[value='show']").prop("selected", true); // select
            save_logo.show();
            update_logo.hide();
            mes_box.css({
              "display": "flex"
            });
            setTimeout(() => (mes_box.css({
              "display": "none"
            })), 2000);
            if (data.message == 'updated') {
              mes.html('Update Successfully.');
            } else {
              mes.html('Please input file!');
            }
          }
        });
      });




    });
  </script>
</body>

</html>